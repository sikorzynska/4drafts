@model List<CategoriesBrowseModel>
@{
    ViewBag.Title = "Categories";
}
<div class="container-fluid mt-5 mb-4">
    <div class="row">
        <div class="col-md-12">
            <div class="card mb-3">
                <div class="card-header pr-0 pl-0">
                    <div class="row no-gutters align-items-center w-100">
                        <div class="col font-weight-bold pl-3">[Genre]</div>
                        <div class="d-none d-md-block col-6">
                            <div class="row no-gutters align-items-center">
                                <div class="col-3 font-weight-bold">[Threads]</div>
                                <div class="col-6 ml-5 font-weight-bold">[Last entry]</div>
                            </div>
                        </div>
                    </div>
                </div>
                @{
                    foreach (var category in Model)
                    {
                        <div class="card-body py-3">
                            <div class="row no-gutters align-items-center">
                                <div class="col">
                                    <a asp-controller="Categories" asp-action="Browse" asp-route-categoryId="@category.Id" class="text-big font-weight-semibold" data-abc="true">
                                        @category.Name
                                    </a>
                                </div>
                                <div class="tooltip mr-350 hide-sm zoom">
                                    <a onclick="categoryInfo(@category.Id)"><i class="info-circle fas fa-info-circle"></i></a>
                                    <span class="tooltiptext">@category.Description</span>
                                </div>
                                <div class="d-none d-md-block col-6">
                                    <div class="row no-gutters align-items-center">
                                        <div class="col-3 ml-2">@category.ThreadCount</div>
                                        @{ if (category.LastEntry != null)
                                            {
                                                var avatar = "";
                                                if (!String.IsNullOrWhiteSpace(category.LastEntry.AuthorAvatarUrl)) avatar = category.LastEntry.AuthorAvatarUrl;
                                                else avatar = "https://image.flaticon.com/icons/png/512/64/64572.png";
                                                <div class="media col-6 ml-5 align-items-center">
                                                    <img src="@avatar" class="d-block ui-w-30 rounded-circle border">
                                                    <div class="media-body flex-truncate ml-2">
                                                        <a asp-controller="Threads" asp-action="Read" asp-route-threadId="@category.LastEntry.Id" class="d-block text-truncate">@category.LastEntry.Title</a>
                                                        <div class="text-muted small text-truncate">@category.LastEntry.CreatedOn &nbsp;·&nbsp; <a onclick="viewProfile('@category.LastEntry.AuthorId')" class="text-muted">@category.LastEntry.AuthorName</a></div>
                                                    </div>
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="media col-6 ml-5 align-items-center">
                                                    <img src="https://image.flaticon.com/icons/png/512/42/42901.png" class="d-block ui-w-30 rounded-circle" />
                                                    <div class="media-body flex-truncate ml-2">
                                                        Such empty...
                                                    </div>
                                                </div>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="m-0">
                    }
                }
            </div>
        </div>
    </div>
</div>
